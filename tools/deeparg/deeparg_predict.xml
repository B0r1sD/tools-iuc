<tool id="deeparg_predict" name="DeepARG predict" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" profile="@PROFILE@">
    <description>Antibiotic Resistance Genes (ARGs) from metagenomes</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements"/>
    <expand macro="xrefs"/>
    <command detect_errors="exit_code"><![CDATA[
        deeparg download_data -o 'deeparg_data' &&
        
        deeparg predict
        --model '$model'
        -i '$input'
        -o 'file.out'
        -d 'deeparg_data'
        --type '$type'
        --min-prob $min_prob
        --arg-alignment-identity $arg_alignment_identity
        --arg-alignment-evalue $arg_alignment_evalue
        --arg-alignment-overlap $arg_alignment_overlap
        --arg-num-alignments-per-entry $arg_num_alignments_per_entry
]]></command>
    <inputs>
        <param argument="--model" type="select" label="Select model to use" >
            <option value="SS" selected="true">SS (short sequences for reads)</option>
            <option value="LS">LS (long sequences for genes)</option>
        </param>
        <param name="input" type="data" format="fasta" label="Input file"/>
        <param argument="--type" type="select" label="Molecular data type" >
            <option value="nucl" selected="true">Nucleotid (default)</option>
            <option value="prot">Protein</option>
        </param>
        <param argument="--min-prob" type="integer" min="0" max="1" value="0.8" label="Minimum probability cutoff [Default: 0.8]" />
        <param argument="--arg-alignment-identity" type="integer" min="0" value="50" label="Identity cutoff for sequence alignment [Default: 50]" />
        <param argument="--arg-alignment-evalue" type="integer" min="0" value="1e-10" label="Evalue cutoff [Default: 1e-10]" />
        <param argument="--arg-alignment-overlap" type="integer" min="0" max="1" value="0.8" label="Alignment read overlap [Default: 0.8]" />
        <param argument="--arg-num-alignments-per-entry" type="integer" min="0" value="1000" label="Diamond, minimum number of alignments per entry [Default: 1000]" /> 
    </inputs>
    <outputs>
        <data name="output" format="tsv" label="${tool.name} on ${on_string}"/>
    </outputs>
    <tests>
        <!-- Test 1 -->
        <test expect_num_outputs="1">
            <param name="input" value="ORFs.fa" ftype="fasta"/>
            <param name="model" value="LS"/>
            <param name="type" value="nucl"/>
            <output name="output" file="output/file.out.align.daa.tsv"/>
        </test>
    </tests>
    <help>
Predict Antibiotic Resistance Genes (ARGs) from metagenomes
    </help>
    <expand macro="citations"/>
</tool>
